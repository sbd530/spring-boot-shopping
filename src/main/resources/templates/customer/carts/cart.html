<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      class="wf-ebgaramond-n4-active wf-ptserif-n4-active wf-nanumgothic-n4-active wf-nanummyeongjo-n6-active wf-nanummyeongjo-n4-active wf-active">
<meta http-equiv="X-UA-Compatible" id="X-UA-Compatible" content="IE=edge">
<!-- header -->
<header th:insert="customer/main/header.html"></header>

<div th:replace="customer/users/mypage/head"></div>


<script th:inline="javascript">

function plusAmount(productId){

    var oldValue = $("#orderAmount"+productId).val();
    $("#orderAmount"+productId).val(oldValue+1);

    var url = "/carts"

    $.ajax({
        url: url,
        method: "PUT",
        data: {
            productId: productId,
            orderAmount: $("#orderAmount"+productId).val()

        },
        success: function(data){
            alert(data);
        },
        error: function(){
            alert("에러발생");
        }

    });

}
    </script>

<div id="displayCanvas" class="desktop" data-viewport="desktop">

  <div id="shopCartDetail" class="shopCartDetail wrapper">
    <div id="cart" class="cart wrapper clearfix">

      <div class="header designSettingElement text-titleWithFontSize">
        <span class="title">
          장바구니
          <span id="cartSize">
          </span>
        </span>
      </div>

      <div class="product field designSettingElement text-body shopCartInfo">

        <div class="tb-title designSettingElement shape">
          <div class="item-list-header">
            <span class="name">상품 정보</span>
            <span class="qty" style=" text-align: left; padding-left: 50px;">수량</span>
            <span class="price" style=" text-align: center;">배송비</span>
          </div>
          <span class="deliveryCharge">배송비</span>
        </div>



        <div id="cartListDiv" class="tb-content with-delivery-price">
          <div class="delivery-group designSettingElement shape">

            <div class="delivery-group-item-list">

              <!-- CartLine Row Start @Don -->
              <div th:each="cartLine : ${cartLineDtoList}" class="info cartDiv designSettingElement shape" style="display:inline-block">
                <div class="product" style="display:inline-block">
                  <div class="img" style="display:inline-block">
                    <a th:href="@{'/products/' + ${cartLine.productId}}">
                      <img th:src="${cartLine.filePath}">
                    </a>
                  </div>
                  <div class="text" style="display:inline-block">
                    <div class="name">
                      <a th:href="@{'/products/' + ${cartLine.productId}}" th:text="${cartLine.productName}">
                        <!-- productName -->
                      </a>
                    </div>

                    <div class="delete-btn-wrapper" style="display:inline-block">
                      <span class="designSettingElement text-assi" th:onclick="'remove(' + ${cartLine.productId} + ')'">
                        삭제하기
                      </span>
                    </div>
                  </div>

                </div>
                <div class="QuantityDiv" style="width: 250px;display:inline-block">
                  <span class="ui-spinner ui-corner-all ui-widget ui-widget-content">
                    <!-- 상품 수량 -->
                    <input th:id="'orderAmount' + ${cartLine.productId}" th:value="${cartLine.orderAmount}"
                           class="designSettingElement shape ui-spinner-input"
                           type="number" data-cart-item-no="34090789" aria-valuemin="1" aria-valuenow="4" autocomplete="off" role="spinbutton">
                    <a th:onclick="'plusAmount(' + cartLine.productId + ')'"
                       tabindex="-1" aria-hidden="true" class="ui-button ui-widget ui-spinner-button ui-spinner-up ui-corner-tr ui-button-icon-only" role="button"
                       th:id="plusAmount" >
                      <span class="ui-button-icon ui-icon ui-icon-triangle-1-n">

                      </span>
                      <span class="ui-button-icon-space">
                    </span>
                    </a>
                    <a th:onclick="'minusAmount(' + cartLine.productId + ')'"
                       tabindex="-1" aria-hidden="true" class="ui-button ui-widget ui-spinner-button ui-spinner-down ui-corner-br ui-button-icon-only" role="button" id="minusAmount">
                      <span class="ui-button-icon ui-icon ui-icon-triangle-1-s"></span>
                    <span class="ui-button-icon-space">
                    </span>
                    </a>
                  </span>
                </div>
                <div class="shopCartPrice price" th:text="${cartLine.rprice}" style="display:inline-block">
                  <!-- rprice -->
                </div>
              </div>
              <!-- CartLine Row 끝 -->


            </div>


            <div class="delivery-group-delivery-price-wrapper designSettingElement shape">

              <div class="delivery-group-sale-price-info">
                <div class="delivery-group-sale-price">

                </div>
              </div>

              <div class="delivery-group-delivery-price-info">
                <span class="delivery-group-delivery-price-msg">
                  무료
                </span>
              </div>

            </div>


          </div>
        </div>




        <div class="tb-total clearfix">
          <div id="cartInfoDiv" class="info designSettingElement shape">
            <div class="price">
              <div class="title">상품 수량</div>
              <div id="cartTotalProductPrice" class="content">[[${totalAmount}]] 개</div>
            </div>
            <div id="cartDiscountDiv" class="discount">
              <div class="hide">
                <span class="icomoon-ic-info designSettingElement text-assi"></span>
                <span id="cartDiscountList" class=""></span>
              </div>
              <!--<div class="title">할인</div>-->
              <!--<div id="cartDiscountPrice" class="content"></div>-->
            </div>
            <div class="price shippingPriceWrapper">
              <div class="title">배송비</div>
              <div id="cartTotalDeliveryPrice" class="content">₩ 0</div>
            </div>
          </div>
          <div id="cartTotalDiv" class="total">
            <div class="title bold">합 계</div>
            <div id="cartTotalDiscountAppliedPrice" class="content bold">₩ [[${totalPrice}]]</div>
          </div>
        </div>
      </div>

      <div class="btn-wrapper shopCartInfo">
        <button id="btn_orderProducts" class="designSettingElement button" style="background-color: #2B2F33 !important;">주문하기</button>
      </div>

      <div th:if="${#lists.size(cartLineDtoList)==0}" id="no-shopCart-msg" class="field_content no-content-msg designSettingElement text-body">
        장바구니가 비어 있습니다.
      </div>


    </div>
  </div>

</div>

</html>